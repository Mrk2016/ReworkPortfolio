---

---

<header
  class="fixed top-0 w-full px-[5%] py-4 backdrop-blur-md border-b border-white/5 z-50 transition-all duration-300"
  id="main-header"
>
  <!-- Desktop Navigation -->
  <nav
    class="hidden md:flex justify-center items-center max-w-7xl mx-auto relative"
  >
    <!-- Centered content -->
    <div class="flex items-center">
      <!-- Logo -->
      <a
        href="#"
        class="text-2xl font-bold text-green-500 no-underline mr-8 hover:text-green-400 transition-colors duration-300"
      >
        <span class="relative">
          &#60;/Mrk&#62;
          <div
            class="absolute -bottom-1 left-0 w-full h-0.5 bg-gradient-to-r from-green-500 to-green-400 opacity-0 hover:opacity-100 transition-opacity duration-300"
          >
          </div>
        </span>
      </a>

      <!-- Navigation Links -->
      <ul class="flex gap-1 list-none m-0 p-0">
        <li>
          <a
            href="#home"
            class="nav-link px-4 py-2 text-white no-underline transition-all duration-300 relative hover:text-green-400 rounded-xl hover:bg-green-500/10 group"
            data-nav="home"
          >
            <span class="relative z-10">Inicio</span>
            <div
              class="absolute inset-0 bg-green-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"
            >
            </div>
          </a>
        </li>
        <li>
          <a
            href="#skills"
            class="nav-link px-4 py-2 text-white no-underline transition-all duration-300 relative hover:text-green-400 rounded-xl hover:bg-green-500/10 group"
            data-nav="skills"
          >
            <span class="relative z-10">Skills</span>
            <div
              class="absolute inset-0 bg-green-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"
            >
            </div>
          </a>
        </li>
        <li>
          <a
            href="#projects"
            class="nav-link px-4 py-2 text-white no-underline transition-all duration-300 relative hover:text-green-400 rounded-xl hover:bg-green-500/10 group"
            data-nav="projects"
          >
            <span class="relative z-10">Proyectos</span>
            <div
              class="absolute inset-0 bg-green-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"
            >
            </div>
          </a>
        </li>
        <li>
          <a
            href="#contact"
            class="nav-link px-4 py-2 text-white no-underline transition-all duration-300 relative hover:text-green-400 rounded-xl hover:bg-green-500/10 group"
            data-nav="contact"
          >
            <span class="relative z-10">Contacto</span>
            <div
              class="absolute inset-0 bg-green-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"
            >
            </div>
          </a>
        </li>
      </ul>
    </div>

    <!-- Theme Toggle (Positioned absolutely to the right) -->
    <div class="absolute right-0 flex items-center">
      <button
        id="theme-toggle"
        class="w-10 h-10 bg-gray-800/30 hover:bg-gray-700/40 rounded-lg relative transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-500/50 group"
        aria-label="Toggle theme"
      >
        <!-- Moon icon (dark mode) -->
        <svg
          class="w-5 h-5 text-blue-400 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300 group-hover:scale-110"
          id="moon-icon"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
          ></path>
        </svg>
        <!-- Sun icon (light mode) -->
        <svg
          class="w-5 h-5 text-yellow-400 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300 opacity-0 group-hover:scale-110"
          id="sun-icon"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            fill-rule="evenodd"
            d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
            clip-rule="evenodd"></path>
        </svg>
      </button>
    </div>
  </nav>

  <!-- Mobile Navigation -->
  <nav class="md:hidden flex justify-between items-center max-w-7xl mx-auto">
    <!-- Mobile Logo con container profesional -->
    <div
      class="bg-gray-900/40 backdrop-blur-md border border-white/10 rounded-xl px-4 py-2"
    >
      <a href="#" class="text-xl font-bold text-green-500 no-underline">
        &#123;/Mrk&#125;
      </a>
    </div>

    <!-- Mobile menu button con container profesional -->
    <div
      class="bg-gray-900/40 backdrop-blur-md border border-white/10 rounded-xl p-2"
    >
      <button
        class="w-10 h-10 bg-gray-800/50 hover:bg-gray-700/50 rounded-lg flex items-center justify-center text-white text-xl z-[110] relative transition-all duration-300"
        id="mobile-menu-btn"
      >
        <span id="hamburger-icon" class="transition-transform duration-300"
          >☰</span
        >
        <span id="close-icon" class="hidden transition-transform duration-300"
          >✕</span
        >
      </button>
    </div>
  </nav>

  <!-- Mobile Menu Overlay -->
  <div
    class="fixed inset-0 bg-black/95 backdrop-blur-md transform translate-y-full transition-transform duration-300 ease-in-out z-[100] md:hidden"
    id="mobile-menu"
  >
    <!-- Close button -->
    <div class="absolute top-6 right-6 z-[110]">
      <button
        class="w-12 h-12 bg-gray-900/60 backdrop-blur-md border border-white/20 rounded-xl flex items-center justify-center text-white hover:bg-red-500/20 hover:border-red-500/30 hover:text-red-400 transition-all duration-300 group"
        id="mobile-close-btn"
      >
        <svg
          class="w-6 h-6 group-hover:scale-110 transition-transform duration-300"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>

    <div
      class="flex flex-col items-center justify-center h-full space-y-8 px-[5%]"
    >
      <!-- Mobile Logo en el menú -->
      <div class="text-center mb-8">
        <div class="text-3xl font-bold text-green-500 mb-2">
          &#123;/Mrk&#125;
        </div>
        <div
          class="w-16 h-0.5 bg-gradient-to-r from-green-500 to-green-400 mx-auto"
        >
        </div>
      </div>

      <!-- Mobile Navigation Links -->
      <a
        href="#home"
        class="mobile-link group flex items-center gap-4 text-white text-2xl font-medium no-underline hover:text-green-500 transition-all duration-300 bg-gray-900/30 backdrop-blur-sm border border-white/10 rounded-2xl px-8 py-4 w-full max-w-sm text-center"
        data-nav="home"
      >
        <svg
          class="w-6 h-6 text-green-500 group-hover:scale-110 transition-transform duration-300"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
          ></path>
        </svg>
        <span class="flex-1">Inicio</span>
      </a>
      <a
        href="#skills"
        class="mobile-link group flex items-center gap-4 text-white text-2xl font-medium no-underline hover:text-green-500 transition-all duration-300 bg-gray-900/30 backdrop-blur-sm border border-white/10 rounded-2xl px-8 py-4 w-full max-w-sm text-center"
        data-nav="skills"
      >
        <svg
          class="w-6 h-6 text-green-500 group-hover:scale-110 transition-transform duration-300"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
          ></path>
        </svg>
        <span class="flex-1">Skills</span>
      </a>
      <a
        href="#projects"
        class="mobile-link group flex items-center gap-4 text-white text-2xl font-medium no-underline hover:text-green-500 transition-all duration-300 bg-gray-900/30 backdrop-blur-sm border border-white/10 rounded-2xl px-8 py-4 w-full max-w-sm text-center"
        data-nav="projects"
      >
        <svg
          class="w-6 h-6 text-green-500 group-hover:scale-110 transition-transform duration-300"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
          ></path>
        </svg>
        <span class="flex-1">Proyectos</span>
      </a>
      <a
        href="#contact"
        class="mobile-link group flex items-center gap-4 text-white text-2xl font-medium no-underline hover:text-green-500 transition-all duration-300 bg-gray-900/30 backdrop-blur-sm border border-white/10 rounded-2xl px-8 py-4 w-full max-w-sm text-center"
        data-nav="contact"
      >
        <svg
          class="w-6 h-6 text-green-500 group-hover:scale-110 transition-transform duration-300"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.13 8.13 0 01-2.939-.515l-5.637 1.406c-.365.092-.657-.215-.565-.565l1.406-5.637A8.13 8.13 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"
          ></path>
        </svg>
        <span class="flex-1">Contacto</span>
      </a>
    </div>
  </div>
</header>

<script>
  // Theme toggle functionality (Desktop only)
  const themeToggle = document.getElementById("theme-toggle");
  const sunIcon = document.getElementById("sun-icon");
  const moonIcon = document.getElementById("moon-icon");
  const html = document.documentElement;

  // Mobile menu functionality
  const mobileMenuBtn = document.getElementById("mobile-menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");
  const hamburgerIcon = document.getElementById("hamburger-icon");
  const closeIcon = document.getElementById("close-icon");
  const mobileLinks = document.querySelectorAll(".mobile-link");
  const mobileCloseBtn = document.getElementById("mobile-close-btn");

  // Check for saved theme preference or default to 'dark'
  const currentTheme = localStorage.getItem("theme") || "dark";

  // Set initial theme (Desktop only)
  if (window.innerWidth >= 768 && themeToggle) {
    if (currentTheme === "light") {
      html.classList.add("light");
      moonIcon?.classList.add("opacity-0");
      sunIcon?.classList.remove("opacity-0");
    } else {
      // Dark mode (default)
      html.classList.remove("light");
      moonIcon?.classList.remove("opacity-0");
      sunIcon?.classList.add("opacity-0");
    }
  }

  // Toggle theme (Desktop only)
  themeToggle?.addEventListener("click", () => {
    if (html.classList.contains("light")) {
      // Switch to dark mode
      html.classList.remove("light");
      moonIcon?.classList.remove("opacity-0");
      sunIcon?.classList.add("opacity-0");
      localStorage.setItem("theme", "dark");
    } else {
      // Switch to light mode
      html.classList.add("light");
      moonIcon?.classList.add("opacity-0");
      sunIcon?.classList.remove("opacity-0");
      localStorage.setItem("theme", "light");
    }
  });

  // Function to close mobile menu
  function closeMobileMenu() {
    mobileMenu?.classList.remove("translate-y-0");
    mobileMenu?.classList.add("translate-y-full");
    hamburgerIcon?.classList.remove("hidden");
    closeIcon?.classList.add("hidden");
    document.body.style.overflow = "auto";
  }

  // Function to open mobile menu
  function openMobileMenu() {
    mobileMenu?.classList.remove("translate-y-full");
    mobileMenu?.classList.add("translate-y-0");
    hamburgerIcon?.classList.add("hidden");
    closeIcon?.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }

  // Mobile menu toggle
  mobileMenuBtn?.addEventListener("click", () => {
    const isOpen = mobileMenu?.classList.contains("translate-y-0");
    if (isOpen) {
      closeMobileMenu();
    } else {
      openMobileMenu();
    }
  });

  // Mobile close button
  mobileCloseBtn?.addEventListener("click", closeMobileMenu);

  // Close mobile menu when clicking on a link
  mobileLinks.forEach((link) => {
    link.addEventListener("click", closeMobileMenu);
  });

  // Close mobile menu when clicking outside
  mobileMenu?.addEventListener("click", (e) => {
    if (e.target === mobileMenu) {
      closeMobileMenu();
    }
  });

  // Handle window resize
  window.addEventListener("resize", () => {
    if (window.innerWidth >= 768) {
      closeMobileMenu();
    }
  });

  // Active section tracking
  function updateActiveSection() {
    const sections = ["home", "skills", "projects", "contact"];
    const navLinks = document.querySelectorAll("[data-nav]");

    let current = "home"; // default

    sections.forEach((section) => {
      const element = document.getElementById(section);
      if (element) {
        const rect = element.getBoundingClientRect();
        // Si la sección está visible en la mitad superior de la pantalla
        if (rect.top <= window.innerHeight / 2 && rect.bottom >= 0) {
          current = section;
        }
      }
    });

    // Update active states
    navLinks.forEach((link) => {
      const navSection = link.getAttribute("data-nav");
      if (navSection === current) {
        link.classList.add("active");
      } else {
        link.classList.remove("active");
      }
    });
  }

  // Listen for scroll events
  window.addEventListener("scroll", updateActiveSection);

  // Initial call
  updateActiveSection();
</script>

<style>
  /* Modo claro */
  html.light header {
    border-bottom: 1px solid rgba(148, 163, 184, 0.3);
  }

  html.light #theme-toggle {
    background: rgba(241, 245, 249, 0.8) !important;
  }

  html.light #theme-toggle:hover {
    background: rgba(226, 232, 240, 0.9) !important;
  }

  html.light .bg-gray-900\/40 {
    background: rgba(255, 255, 255, 0.9) !important;
    border-color: rgba(148, 163, 184, 0.3) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  }

  html.light .bg-gray-800\/50 {
    background: rgba(241, 245, 249, 0.9) !important;
  }

  html.light .text-white {
    color: #1e293b !important;
  }

  /* Mobile menu animations */
  .mobile-link {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.4s ease;
  }

  #mobile-menu.translate-y-0 .mobile-link {
    opacity: 1;
    transform: translateY(0);
  }

  #mobile-menu.translate-y-0 .mobile-link:nth-child(2) {
    transition-delay: 0.1s;
  }

  #mobile-menu.translate-y-0 .mobile-link:nth-child(3) {
    transition-delay: 0.2s;
  }

  #mobile-menu.translate-y-0 .mobile-link:nth-child(4) {
    transition-delay: 0.3s;
  }

  #mobile-menu.translate-y-0 .mobile-link:nth-child(5) {
    transition-delay: 0.4s;
  }

  /* Ensure proper stacking */
  #mobile-menu-btn {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Mobile menu covers everything */
  #mobile-menu {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
  }

  /* Navigation active states */
  .nav-link.active,
  .mobile-link.active {
    color: #22c55e !important;
    background: rgba(34, 197, 94, 0.15) !important;
    border-color: rgba(34, 197, 94, 0.3) !important;
  }

  .nav-link.active .absolute {
    opacity: 1 !important;
  }

  /* Mobile active states */
  .mobile-link.active {
    transform: scale(1.02);
    box-shadow: 0 8px 25px rgba(34, 197, 94, 0.3);
  }

  /* Force hide desktop nav on mobile */
  @media (max-width: 767px) {
    nav.hidden {
      display: none !important;
    }
  }
</style>
